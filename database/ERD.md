# Entity Relationship Diagram (ERD)

## SÆ¡ Ä‘á»“ quan há»‡ thá»±c thá»ƒ cho MealPlan AI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USERS       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)       â”‚
â”‚ â€¢ email         â”‚
â”‚ â€¢ full_name     â”‚
â”‚ â€¢ avatar_url    â”‚
â”‚ â€¢ phone         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER_PREFERENCES        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)                 â”‚
â”‚ â€¢ user_id (FK)            â”‚
â”‚ â€¢ dietary_type            â”‚
â”‚ â€¢ allergies[]             â”‚
â”‚ â€¢ health_goals[]          â”‚
â”‚ â€¢ daily_calorie_target    â”‚
â”‚ â€¢ daily_protein_target    â”‚
â”‚ â€¢ weekly_budget           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CATEGORIES     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ name           â”‚ 1       â”‚      DISHES          â”‚
â”‚ â€¢ name_vi        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ description    â”‚       N â”‚ â€¢ id (PK)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â€¢ name               â”‚
                             â”‚ â€¢ name_vi            â”‚
                             â”‚ â€¢ category_id (FK)   â”‚
                             â”‚ â€¢ meal_type          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚ â€¢ cuisine_type       â”‚
â”‚   INGREDIENTS    â”‚         â”‚ â€¢ difficulty_level   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚ â€¢ prep_time_minutes  â”‚
â”‚ â€¢ id (PK)        â”‚         â”‚ â€¢ cook_time_minutes  â”‚
â”‚ â€¢ name           â”‚         â”‚ â€¢ servings           â”‚
â”‚ â€¢ name_vi        â”‚       N â”‚ â€¢ calories           â”‚
â”‚ â€¢ category       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â€¢ protein            â”‚
â”‚ â€¢ unit           â”‚         â”‚ â€¢ carbs              â”‚
â”‚ â€¢ calories_...   â”‚         â”‚ â€¢ fat                â”‚
â”‚ â€¢ protein_...    â”‚         â”‚ â€¢ estimated_cost     â”‚
â”‚ â€¢ avg_price      â”‚         â”‚ â€¢ is_vegetarian      â”‚
â”‚ â€¢ is_vegetarian  â”‚         â”‚ â€¢ is_vegan           â”‚
â”‚ â€¢ is_vegan       â”‚         â”‚ â€¢ image_url          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â€¢ instructions       â”‚
         â”‚                   â”‚ â€¢ popularity_score   â”‚
         â”‚ N                 â”‚ â€¢ rating_avg         â”‚
         â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                              â”‚
         â”‚                              â”‚ N
         â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚   DISH_INGREDIENTS   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                           1 â”‚ â€¢ dish_id (FK)       â”‚
                             â”‚ â€¢ ingredient_id (FK) â”‚
                             â”‚ â€¢ quantity           â”‚
                             â”‚ â€¢ unit               â”‚
                             â”‚ â€¢ is_optional        â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      TAGS        â”‚ N     N â”‚   DISH_TAGS      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)        â”‚         â”‚ â€¢ dish_id (FK)   â”‚
â”‚ â€¢ name           â”‚         â”‚ â€¢ tag_id (FK)    â”‚
â”‚ â€¢ name_vi        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USERS       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     MEAL_PLANS            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)                 â”‚
â”‚ â€¢ user_id (FK)            â”‚
â”‚ â€¢ name                    â”‚
â”‚ â€¢ start_date              â”‚
â”‚ â€¢ end_date                â”‚
â”‚ â€¢ total_days              â”‚
â”‚ â€¢ status                  â”‚
â”‚ â€¢ target_calories         â”‚
â”‚ â€¢ target_budget           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ 1
            â”‚
            â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MEAL_PLAN_ITEMS             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)                        â”‚
â”‚ â€¢ meal_plan_id (FK)              â”‚
â”‚ â€¢ dish_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â€¢ meal_date              â”‚       â”‚
â”‚ â€¢ meal_time              â”‚       â”‚
â”‚ â€¢ servings               â”‚       â”‚
â”‚ â€¢ is_completed           â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
                                   â”‚
                                   â”‚ N
                              â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                              â”‚  DISHES  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USERS       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SHOPPING_LISTS          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)                 â”‚
â”‚ â€¢ user_id (FK)            â”‚
â”‚ â€¢ meal_plan_id (FK)       â”‚
â”‚ â€¢ name                    â”‚
â”‚ â€¢ shopping_date           â”‚
â”‚ â€¢ estimated_total         â”‚
â”‚ â€¢ actual_total            â”‚
â”‚ â€¢ status                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ 1
            â”‚
            â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SHOPPING_LIST_ITEMS            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)                        â”‚
â”‚ â€¢ shopping_list_id (FK)          â”‚
â”‚ â€¢ ingredient_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â€¢ quantity                   â”‚   â”‚
â”‚ â€¢ unit                       â”‚   â”‚
â”‚ â€¢ estimated_price            â”‚   â”‚
â”‚ â€¢ actual_price               â”‚   â”‚
â”‚ â€¢ is_purchased               â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                   â”‚ N
                             â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚ INGREDIENTS  â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RESTAURANTS      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)          â”‚
â”‚ â€¢ name             â”‚
â”‚ â€¢ description      â”‚
â”‚ â€¢ cuisine_type     â”‚
â”‚ â€¢ address          â”‚
â”‚ â€¢ latitude         â”‚
â”‚ â€¢ longitude        â”‚
â”‚ â€¢ phone            â”‚
â”‚ â€¢ price_range      â”‚
â”‚ â€¢ price_min        â”‚
â”‚ â€¢ price_max        â”‚
â”‚ â€¢ rating_avg       â”‚
â”‚ â€¢ is_vegetarian... â”‚
â”‚ â€¢ opening_hours    â”‚
â”‚ â€¢ image_url        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ 1
          â”‚
          â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RESTAURANT_DISHES           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)                     â”‚
â”‚ â€¢ restaurant_id (FK)          â”‚
â”‚ â€¢ dish_id (FK)                â”‚
â”‚ â€¢ name                        â”‚
â”‚ â€¢ description                 â”‚
â”‚ â€¢ price                       â”‚
â”‚ â€¢ is_available                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USERS       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ N                   â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER_REVIEWS      â”‚  â”‚  USER_FAVORITES  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)           â”‚  â”‚ â€¢ id (PK)        â”‚
â”‚ â€¢ user_id (FK)      â”‚  â”‚ â€¢ user_id (FK)   â”‚
â”‚ â€¢ reviewable_type   â”‚  â”‚ â€¢ favorable_type â”‚
â”‚ â€¢ reviewable_id     â”‚  â”‚ â€¢ favorable_id   â”‚
â”‚ â€¢ rating            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ review_text       â”‚
â”‚ â€¢ images[]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USERS       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ N                   â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   NUTRITION_LOGS      â”‚ â”‚   EXPENSE_LOGS     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)             â”‚ â”‚ â€¢ id (PK)          â”‚
â”‚ â€¢ user_id (FK)        â”‚ â”‚ â€¢ user_id (FK)     â”‚
â”‚ â€¢ log_date            â”‚ â”‚ â€¢ expense_date     â”‚
â”‚ â€¢ meal_time           â”‚ â”‚ â€¢ expense_type     â”‚
â”‚ â€¢ dish_id (FK)        â”‚ â”‚ â€¢ amount           â”‚
â”‚ â€¢ calories            â”‚ â”‚ â€¢ description      â”‚
â”‚ â€¢ protein             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ carbs               â”‚
â”‚ â€¢ fat                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USERS       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    AI_RECOMMENDATIONS         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id (PK)                     â”‚
â”‚ â€¢ user_id (FK)                â”‚
â”‚ â€¢ dish_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â€¢ recommendation_type     â”‚   â”‚
â”‚ â€¢ reason                  â”‚   â”‚
â”‚ â€¢ score                   â”‚   â”‚
â”‚ â€¢ is_viewed               â”‚   â”‚
â”‚ â€¢ is_accepted             â”‚   â”‚
â”‚ â€¢ expires_at              â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                â”‚ N
                          â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                          â”‚  DISHES  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Giáº£i thÃ­ch quan há»‡

### Quan há»‡ 1-N (One-to-Many)
- 1 User cÃ³ nhiá»u Preferences, Meal Plans, Shopping Lists, Reviews, Favorites, Logs
- 1 Category cÃ³ nhiá»u Dishes
- 1 Dish cÃ³ nhiá»u Dish Ingredients
- 1 Meal Plan cÃ³ nhiá»u Meal Plan Items
- 1 Shopping List cÃ³ nhiá»u Shopping List Items
- 1 Restaurant cÃ³ nhiá»u Restaurant Dishes

### Quan há»‡ N-N (Many-to-Many)
- Dishes â†” Ingredients (qua báº£ng trung gian `dish_ingredients`)
- Dishes â†” Tags (qua báº£ng trung gian `dish_tags`)

### Quan há»‡ Polymorphic
- `user_reviews`: CÃ³ thá»ƒ review Dishes hoáº·c Restaurants (reviewable_type, reviewable_id)
- `user_favorites`: CÃ³ thá»ƒ favorite Dishes hoáº·c Restaurants (favorable_type, favorable_id)

## ğŸ¯ CÃ¡c trÆ°á»ng há»£p sá»­ dá»¥ng chÃ­nh

### 1. Táº¡o káº¿ hoáº¡ch bá»¯a Äƒn
```
User â†’ Meal Plan â†’ Meal Plan Items â†’ Dishes â†’ Dish Ingredients â†’ Ingredients
```

### 2. Táº¡o danh sÃ¡ch Ä‘i chá»£
```
Meal Plan â†’ Shopping List â†’ Shopping List Items â†’ Ingredients
```

### 3. TÃ­nh dinh dÆ°á»¡ng
```
User â†’ Nutrition Logs â†’ Dishes
```

### 4. TÃ¬m nhÃ  hÃ ng phÃ¹ há»£p
```
User â†’ User Preferences â†’ Restaurants (filter by dietary_type)
```

### 5. Nháº­n gá»£i Ã½ AI
```
User â†’ User Preferences â†’ AI Recommendations â†’ Dishes
```

## ğŸ”‘ LÆ°u Ã½ vá» khÃ³a

- **Primary Key (PK)**: UUID cho táº¥t cáº£ cÃ¡c báº£ng
- **Foreign Key (FK)**: LiÃªn káº¿t giá»¯a cÃ¡c báº£ng
- **Unique Constraints**: email trong users, (user_id, favorable_type, favorable_id) trong user_favorites
- **Check Constraints**: rating tá»« 1-5 trong user_reviews

## ğŸ“Š Cardinaliry Summary

| Relationship | Type | Description |
|--------------|------|-------------|
| Users â†’ User Preferences | 1:1 | Má»—i user cÃ³ 1 preferences |
| Users â†’ Meal Plans | 1:N | 1 user cÃ³ nhiá»u meal plans |
| Users â†’ Shopping Lists | 1:N | 1 user cÃ³ nhiá»u shopping lists |
| Categories â†’ Dishes | 1:N | 1 category cÃ³ nhiá»u dishes |
| Dishes â†’ Ingredients | N:N | Nhiá»u dishes dÃ¹ng nhiá»u ingredients |
| Dishes â†’ Tags | N:N | Nhiá»u dishes cÃ³ nhiá»u tags |
| Meal Plans â†’ Meal Plan Items | 1:N | 1 plan cÃ³ nhiá»u items |
| Shopping Lists â†’ Shopping List Items | 1:N | 1 list cÃ³ nhiá»u items |
| Restaurants â†’ Restaurant Dishes | 1:N | 1 restaurant cÃ³ nhiá»u dishes |

